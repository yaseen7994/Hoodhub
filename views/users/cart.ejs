<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from smartshop.websitelayout.net/home-shop-3.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Jan 2023 15:59:55 GMT -->
<head>

    <!-- metas -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="HoodHub - hoodies shop" />

    <!-- title  -->
    <title>HoodHub</title>

    <!-- favicon -->
    <link rel="shortcut icon" href="/img/logos/favicon.png">
    <link rel="apple-touch-icon" href="/img/logos/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/logos/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/logos/apple-touch-icon-114x114.png">

    <!-- plugins -->
    <link rel="stylesheet" href="/css/plugins.css">

    <!-- theme core css -->
    <link href="/css/styles-2.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.all.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
    crossorigin="anonymous"></script>
</head>

<body>

    <!-- PAGE LOADING
    ================================================== -->
    <div id="preloader"></div>

    <!-- MAIN WRAPPER
    ================================================== -->
    <div class="main-wrapper mp-pusher" id="mp-pusher">

        <!-- HEADER
        ================================================== -->
        <header class="fixed header-light-nav header-02">

            <div id="top-bar">
                <div class="container">
                    <div class="row">
                        <div class="col-3 col-md-6">
                            <div class="top-bar-info">
                                <ul class="ps-0">
                                    <li><a href="tel:7994515578"><i class="ti-mobile"></i><span class="d-none d-md-inline-block ps-2">7994515578</span></a></li>
                                    <li><a href="mailto:yaseenap148gmail.com"><i class="ti-email"></i><span class="d-none d-md-inline-block ps-2">HoodHub12@gmail.com</span></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-9 col-md-6">
                            <% if(session!=null){ %>
                                <ul class="top-nav ps-0">
                                    <li class="nav-item dropdown">
                                        <a href="#" data-bs-toggle="dropdown" class="dropdown-toggle"><i class="far fa-user"></i><span><%= user.name %></span></a>
                                        
                                        <ul class="dropdown-menu p-4">
                                            <li class="mb-2">
                                                <div class="media align-items-center">
                                                    <img class="w-40px rounded-circle me-3"  src="img/icons/user.png" alt="...">
                                                    <div class="media-body"><%= user.name %></div>
                                                </div>
    
                                            </li>
                                            <li>
                                                <a href="/profile" class="dropdown-item">My Profile</a>
                                            </li>
                                            <li>
                                                <a href="/logout" class="dropdown-item">Log Out</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                              
                            <%}%>
                        </div>
                            

                        </div>
                    </div>
                </div>
            </div>

            <div class="navbar-default">

               


                <div class="container">
                    <div class="row align-items-center g-0">
                        <div class="col-12 col-lg-12">
                            <div class="menu_area alt-font">
                                <nav class="navbar navbar-expand-lg navbar-light p-0">

                                    <div class="navbar-header navbar-header-custom">
                                        <!-- logo -->
                                        <a href="/home" class="navbar-brand logodefault"><img id="logo" src="/img/logos/hoodhub.png" alt="logo"></a>
                                        <!-- end logo -->
                                    </div>

                                    <!-- menu toggler -->
                                    <div class="navbar-toggler"></div>
                                    <!-- end menu toggler -->

                                    <!-- menu area -->
                                    <ul class="navbar-nav mx-auto" id="nav" style="display: none;">

                                        <li><a href="/home">Home</a>
                                        </li>
                                        <li><a href="/aboutus">About</a>


                                            <li><a href="/shop">Shop</a>
                                            
                                            </li>
                                        </li>
                                        <% if(session!=null){ %>
                                            <li><a href="/contact">Contact</a>
                                        <li><a href="/profile">Account</a>
                                            <ul>
                                                
                                                    <li><a href="/logout">Logout</a></li>
                                                    <li><a href="/orders">Orders List</a></li>
                                                    <li><a href="/wishlist">Wishlist</a></li>
                                                    <li><a href="/profile">Profile Page</a></li>
                                                    <li><a href="/address">Shipping Address</a></li>
                                            </ul>
                                            </li>
                                           
                                                <% }else{ %>
                                        <li><a href="/contact">Contact</a>
                                         <li><a href="/login">Login</a>
                                                        <ul>
                                                    <li><a href="/login">Login</a></li>
                                                    <li><a href="/signup">Signup</a></li>
                                                  
                                                
                                            </ul>
                                        </li>
                                        </li>
                                        
                                            <% } %>   
                                            
                                    </ul>

                                    <!-- end menu area -->

                                    
                                    <% if(session!=null){ %>
                                    <div class="attr-nav">
                                        <ul>
                                            
                                            <li class="dropdown me-3 me-lg-0">
                                                <a href="" class="dropdown-toggle" data-bs-toggle="dropdown">
                                                    <i class="far fa-heart"></i>
                                                    <span class="badge bg-primary"><%= wishlistLength %></span>
                                                </a>
                                                <ul class="dropdown-menu cart-list">
                                                    <% if(wishbox.length){  %>
                                                   <%wishbox.forEach(i => {%>
                                                     <li>   
                                                    <a href="/wishlist" class="photo"><img src="<%= i.productImage[0] %>" class="cart-thumb" alt="..." /></a>
                                                        <h6><a href="/wishlist"><%= i.productname %></a></h6>
                                                        <p><span class="price"><%= i.price %></span></p>
                                                    </li>
                                                 <%  })  %>
                                                    <li class="total bg-primary">
                                                        <span class="float-start"><strong>Items</strong>:<%= wishbox.length %></span>
                                                        <a href="/wishlist" class="butn-style2 small white float-end w-auto"><span>Go to wishlist</span></a>
                                                    </li>
                                                    <% }else{ %>
                                                        <li>   
                                                            <a href="/wishlist" class="photo"><img src="img/other/wishlsit.gif" class="cart-thumb" alt="..." /></a>
                                                                <h6><a href="/wishlist">Wishlist is Empty!..</a></h6>
                                                            
                                                            </li>
                                                            <li class="total bg-primary">
                                                                <span class="float-start"><strong>Items</strong>: <%= wishlistLength %></span>
                                                                <a href="/shop" class="butn-style2 small white float-end w-auto"><span>Go to shop</span></a>
                                                            </li>
                                                            <% } %>
                                                </ul>
                                                
                                            </li>
                                 
                                          
                                              
                                                   

                                                    
                                                        <% } %>
                                                           
                                            
                                            
                                           
                                        </ul>
                                    </div>
                                    <!-- end attribute navigation -->
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>


<!-- PAGE LOADING
================================================== -->


<!-- MAIN WRAPPER
================================================== -->
<div class="main-wrapper mp-pusher" id="mp-pusher">




      <!-- PAGE TITLE
        ================================================== -->
        <section class="page-title-section bg-img cover-background" data-background="img/other/shop5.png">
            <div class="container">

                <div class="title-info">
                    <h1>Shop Cart</h1>
                </div>
                <div class="breadcrumbs-info">
                    <ul class="ps-0">
                        <li><a href="/">Home</a></li>
                        <li><a href="#">Shop Cart</a></li>
                    </ul>
                </div>

            </div>
        </section>

        <!-- CART TABLE
    ================================================== -->



        <section class="md">
            <div class="container" id="reloadDiv">
                <div class="row">


                    <!-- left pannel section -->
                    <div class="col-lg-8 col-md-12 ps-1-1 mb-1-9 mb-lg-0">

                        <div class="common-block">


                            <% if(cart.length> 0) { %>
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th class="first"></th>
                                                <th class="text-uppercase font-weight-500">Product</th>
                                                <th class="text-uppercase font-weight-500">Price</th>
                                                <th class="text-uppercase font-weight-500">Stock</th>
                                                <th class="text-uppercase font-weight-500">Quantity</th>
                                                <th class="text-uppercase font-weight-500">Sub Total</th>
                                                <th></th>
                                            </tr>
                                        </thead>


                                        <tbody>

                                            <% cart.forEach(x=> { %>

                                                <tr>

                                                    <td>
                                                        <a href="#"><img
                                                           style="height: 100px;" src="<%= x.product.productImage[0] %>"
                                                                alt="..." height="80px" width="80px" /></a>
                                                    </td>

                                                    <td><a href="#">
                                                            <%= x.product.productname %>
                                                        </a></td>
                                                    <td class="product-price">₹<%= x.product.price %>
                                                    </td>
                                                    <td>
                                                        <% if (x.product.quantity>0) { %>
                                                            Stock In
                                                            <% }else{ %>
                                                                Stock out
                                                                <% } %>
                                                    </td>
                                                    <input type="hidden" value="<%= x.product.quantity %>" id="stock">
                                                    <td class="quantity__item">
                                                        <span>
                                                            <div style="float: left;">
                                                                <button type="button"
                                                                onclick="quty_change('<%= x.product._id %>', -1 , '<%= x.product.price %>' )"
                                                                class="btn btn-dark">-</button>
                                                            </div>
                                                            <div style="width: 20px; float: left; text-align: center;" id="pro<%= x.product._id %>">
                                                                <%= x.qty %>
                                                            </div>
                                                            <div style="float: left;">
                                                            <button type="button"
                                                                onclick="quty_change('<%= x.product._id %>', 1 , '<%= x.product.price %>' )"
                                                                class="btn btn-secondary">+</button>
                                                            </div>
                                                        </span>
                                                    </td>
                                                    <td class="pro<%= x.product._id %>">₹<%= x.price %>
                                                    </td>
                                                    <td class="product-remove text-center">
                                                        <button onclick="deletecart('<%= x.product._id %>')"
                                                            style="border: none;"><i
                                                                class="fas fa-times"></i></button>
                                                    </td>
                                                </tr>
                                                <% }); %>

                                        </tbody>


                                    </table>

                                </div>

                                <div class="buttons-set">

                                    <a href="/shop" class="butn-style2 dark float-end"
                                        >Continue Shopping</a>
                                    <br>


                                </div>
                                <% } else{ %>

                                    <div class="d-flex" style="flex-direction: column; justify-content: space-around; align-items: center;">
                                        <h3 style="color: #6f4f9e;">Your Cart is Empty ! ..</h3>
                                        <img style="height: 280px;" src="img/other/box.gif" alt="" srcset="">
                                    <a href="/shop"><button
                                            class="butn-style2 dark bg-color float-end ms-2 mb-2 mb-md-0"><span>Continue
                                                Shopping</span></button></a>
                                    </div>

                                    <br><br>
                                    <% } %>
                        </div>

                    </div>
                    <!-- end left pannel section -->

                    <!-- right pannel section -->
                    <% if(cart.length> 0) { %>
                        <div class="col-lg-4 col-12 side-bar">



                            <div class="widget">

                                <div class="widget-title">
                                    <h5>Cart Summary</h5>
                                </div>

                                <table class="table classic">
                                    <tbody>
                                        <tr>
                                            <th>Cart Subtotal:</th>
                                            <td class="carttotel">₹ <%= totel %>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Shipping:</th>
                                            <td class="text-gray-dark">Free</td>
                                        </tr>
                                        <tr>
                                            <th>Total:</th>
                                            <td class="carttotel">₹ <%= totel %>
                                            </td>
                                            <input type="hidden" name="totel" value="">
                                        </tr>
                                    </tbody>
                                </table>


                            </div>
                            <a href="/checkout" class="butn-style2 dark float-end"
                                >Checkout</a>



                        </div>
                        <% }else{ %>
                        <div class="col-lg-4 col-12 side-bar">



                            <div class="widget">

                                <div class="widget-title">
                                    <h5>Cart Summary</h5>
                                </div>

                                <table class="table classic">
                                    <tbody>
                                        <tr>
                                            <th>Cart Subtotal:</th>
                                            <td class="carttotel">₹ 0.00
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Shipping:</th>
                                            <td class="text-gray-dark">-</td>
                                        </tr>
                                        <tr>
                                            <th>Total:</th>
                                            <td class="carttotel">₹ 0.00
                                            </td>
                                            <input type="hidden" name="totel" value="">
                                        </tr>
                                    </tbody>
                                </table>


                            </div>
                            



                        </div>
                        <% }  %>
                            <!-- end right pannel section -->

                </div>
            </div>
        </section>


            <script>

                function deletecart(proid) {


                    Swal.fire({
                        title: 'Are you sure?',
                        text: "You wan't to delete!",
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'yes, delete!'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $.ajax({
                                url: "/remove_cart",
                                data: {
                                    productId: proid
                                },
                                method: 'post',
                                success: (response) => {
                                    console.log("arrived")

                                    $('#reloadDiv').load('/cart #reloadDiv')
                                    console.log(response);
                                    Swal.fire({
                                        title: 'deleted!',
                                        text: 'Your deleted',
                                        icon: 'success',
                                        showConfirmButton: false,
                                        timer: 1000
                                    })
                                    
                                }

                            })
                        }
                    })
                }


                function quty_change(proid, count, productPrice) {
                    let quantity = document.getElementById('pro' + proid).innerHTML
                    let stock = document.getElementById('stock').value
               
                    if (quantity <= 1 && count == -1) {
                        Swal.fire({
                            title: 'Invalid quantity',
                            text: "Quantity cannot be less than one",
                            icon: 'warning',
                            confirmButtonColor: 'false',
                        })
                    } else if (count == 1 && stock == quantity ) {

                        Swal.fire({
                            title: 'out of stock',
                            text: "sorry currently unavailable!",
                            icon: 'warning',
                            confirmButtonColor: 'false',
                        })

                    }
                    else {
                        $.ajax({
                            url: "/changeqty",
                            data: {
                                productId: proid,
                                count: count,
                                price: productPrice,
                            },
                            method: 'post',
                            success: (response) => {
                                console.log(response);
                                document.getElementById('pro' + proid).innerHTML = parseInt(quantity) + count
                                document.getElementsByClassName('pro' + proid)[0].innerHTML = '₹' + response.totelPrice
                                document.getElementsByClassName('carttotel')[0].innerHTML = '₹' + response.sum
                                document.getElementsByClassName('carttotel')[1].innerHTML = '₹' + response.sum

                            }
                        })
                    }
                }
            </script>

    </div>



<%-include('../layouts/userFooter.ejs')  %>